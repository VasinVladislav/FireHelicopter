from utils import randbool
from utils import randcell
from utils import randcell2
# 0 - Ð¿Ð¾Ð»Ðµ
# 1 - Ð´ÐµÑ€ÐµÐ²Ð¾
# 2 - Ñ€ÐµÐºÐ°
# 3 - Ð²ÐµÑ€Ñ‚Ð¾Ð»Ñ‘Ñ‚Ð½Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÐºÐ°
# 4 - Ð¼Ð°ÑÑ‚ÐµÑ€ÑÐºÐ°Ñ
# 5 - Ð¾Ð³Ð¾Ð½ÑŒ

CELL_TYPES = "ðŸŸ«ðŸŒ³ðŸŒŠðŸ”¥ðŸ”§ðŸ¥"
THREE_REWARD = 100
THREE_PENALTY = 100
UPGRADE_COST = 500
HP_COST = 1000

class Map():

    # Ñ‚ÑƒÑ‚ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ ÐºÐ°Ñ€ÐºÐ°Ñ ÐºÐ°Ñ€Ñ‚Ñ‹ Ð¸ ÐµÑ‘ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ
    def __init__(self, mapX, mapY):
        self.mapX = mapX  # Ð·Ð°Ð´Ð°Ñ‘Ð¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ ÐºÐ°Ñ€Ñ‚Ñ‹ Ð¿Ð¾ Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»Ð¸
        self.mapY = mapY  # Ð·Ð°Ð´Ð°Ñ‘Ð¼ Ñ€Ð°Ð·Ð¼ÐµÑ€ ÐºÐ°Ñ€Ñ‚Ñ‹ Ð¿Ð¾ Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»Ð¸
        self.cells = [[0 for i in range(mapX)] for j in range(mapY)]  # Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ°Ñ€ÐºÐ°ÑÐ° ÐºÐ°Ñ€Ñ‚Ñ‹ ÑÐ¾ÑÑ‚Ð¾ÑÑ‰Ð¸Ñ… Ð¸Ð· Ð½ÑƒÐ»ÐµÐ¹ 
        self.generate_forest()
        self.generate_river(mapX, mapY)      
        self.upgrade_station()
        self.helipad()

    # Ñ‚ÑƒÑ‚ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ°Ñ€ÐºÐ°Ñ ÐºÐ°Ñ€Ñ‚Ñ‹ Ð¸ Ð¾Ð±Ð²Ð¾Ð´Ð¸Ð¼ ÐµÑ‘ Ñ€Ð°Ð¼ÐºÐ¾Ð¹
    def print_map(self, heli, clouds):
        print("â¬›" * (self.mapX + 2))   # Ð²ÐµÑ€Ñ…Ð½ÑÑ Ð»Ð¸Ð½Ð¸Ñ Ñ€Ð°Ð¼ÐºÐ¸, Ð¿ÐµÑ‡Ð°Ñ‚Ð°ÐµÐ¼ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð² ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ðµ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»Ð¸ ÐºÐ°Ñ€Ñ‚Ñ‹(mapX) Ð¸ Ð¿Ð¾ Ð¾Ð´Ð½Ð¾Ð¼Ñƒ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñƒ Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹(+2)
        for i in range(self.mapY):  # i - Ð¸Ð½Ð´ÐµÐºÑ (Ð»Ð¸ÑÑ‚Ð°) Ð½Ð° Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾ÑÐ¸(y) Ð² ÐºÐ°Ñ€ÐºÐ°ÑÐµ ÐºÐ°Ñ€Ñ‚Ñ‹, Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ñ 0 Ð¸ Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ Ð½Ð¾Ð²Ð¾Ð¹ Ð¸Ñ‚ÐµÑ€Ð°Ñ†Ð¸ÐµÐ¹ Ð¸Ð´Ñ‘Ð¼ Ð²Ð½Ð¸Ð· Ð¿Ð¾ Ð¾ÑÐ¸ Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ð¼
            print("â¬›", end ="")    # ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð»ÐµÐ²Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹ Ñ€Ð°Ð¼ÐºÐ¸ Ð² ÑÑ‚Ñ€Ð¾Ñ‡ÐºÐµ â„– i, Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð½Ðµ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼
            for j in range(self.mapX):    # j - Ð¸Ð½Ð´ÐµÐºÑ (ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°) Ð½Ð° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾ÑÐ¸(x) 
                cell = self.cells[i][j]
                if (clouds.cells[i][j] == 1):
                    print("ðŸ’¨", end ="")
                elif (clouds.cells[i][j] == 2):
                    print("âš¡", end ="")
                elif (heli.hy == i and heli.hx == j):
                    print("ðŸš", end ="")
                elif (cell >= 0 and cell <= len(CELL_TYPES)):                                  
                    print(CELL_TYPES[cell], end = "")   # Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚(CELL_TYPES) Ð¿Ð¾ Ð½Ð¾Ð¼ÐµÑ€Ñƒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° Ð² cell (Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² cell, ÐºÐ°Ðº Ð¸ Ð² cells ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð½ÑƒÐ»ÑÐ¼Ð¸)
            print("â¬›")  # ÑÑ‚Ñ€Ð¾Ñ‡ÐºÐ° â„– i Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð¼ Ð¿Ñ€Ð°Ð²Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹ Ñ€Ð°Ð¼ÐºÐ¸, Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ
        print("â¬›" * (self.mapX + 2))   # Ð½Ð¸Ð¶Ð½ÑÑ Ð»Ð¸Ð½Ð¸Ñ Ñ€Ð°Ð¼ÐºÐ¸, Ð°Ð½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð° Ð²ÐµÑ€Ñ…Ð½ÐµÐ¹

    # Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ Ð·Ð°Ð´Ð°Ð½Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ñ‡Ð°ÑÑ‚ÑŒÑŽ ÐºÐ°Ñ€Ñ‚Ñ‹
    def check_bounds(self, x, y):
        if (x < 0 or y < 0 or x >= self.mapX or y >= self.mapY):
            return False
        return True
    
    # Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ°Ñ€Ñ‚Ñƒ Ð´ÐµÑ€ÐµÐ²ÑŒÑÐ¼Ð¸
    def generate_forest(self, rndMin = 1, rndMax = 2):  # Ð²Ð²Ð¾Ð´Ð¸Ð¼ ÑÐ¾Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ ÐºÐ»ÐµÑ‚Ð¾Ðº Ð´ÐµÑ€ÐµÐ²ÑŒÐµÐ² Ð¿Ð¾ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸ÑŽ Ðº Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ðµ
        for i in range(self.mapY):    # Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ð¼ Ð¿Ð¾ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ Ð¿Ð¾Ð´ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ i Ð½Ð° Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾ÑÐ¸
            for j in range(self.mapX):    # Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ð¼ Ð¿Ð¾ ÐºÐ°Ð¶Ð´Ð¾Ð¼Ñƒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñƒ Ð² ÑÑ‚Ñ€Ð¾ÐºÐµ Ð¿Ð¾Ð´ Ð½Ð¾Ð¼ÐµÑ€Ð¾Ð¼ j Ð½Ð° Ð³Ð¾Ñ€Ð¸Ð·Ð¾Ð½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð¾ÑÐ¸
                if randbool(rndMin, rndMax):    # Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒ "Ð²Ñ‹Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸Ñ" Ð´ÐµÑ€ÐµÐ²Ð°
                    self.cells[i][j] = 1    # Ð¼ÐµÐ½ÑÐµÐ¼ ÐºÐ»ÐµÑ‚ÐºÑƒ Ð½Ð° 1(Ð´ÐµÑ€ÐµÐ²Ð¾) Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚ CELL_TYPES

    # Ñ€Ð°Ð½Ð´Ð¾Ð¼Ð½Ð¾Ðµ Ð´ÐµÑ€ÐµÐ²Ð¾
    def generate_tree(self):
        rc = randcell(self.mapX, self.mapY) 
        rx, ry = rc[0], rc[1]
        if (self.cells[ry][rx]) == 0:   # ÐµÑÐ»Ð¸ Ð½Ð° ÐºÐ»ÐµÑ‚ÐºÐµ Ð¿Ð¾Ð»Ðµ
            self.cells[ry][rx] = 1     # Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÐµÐ³Ð¾ Ð½Ð° Ð´ÐµÑ€ÐµÐ²Ð¾

    # Ð¼Ð°ÑÑ‚ÐµÑ€ÑÐºÐ°Ñ
    def upgrade_station(self):
        rc = randcell(self.mapX, self.mapY) 
        rx, ry = rc[0], rc[1]
        self.cells[ry][rx] = 4

    # Ð²ÐµÑ€Ñ‚Ð¾Ð»Ñ‘Ñ‚Ð½Ð°Ñ Ð¿Ð»Ð¾Ñ‰Ð°Ð´ÐºÐ°
    def helipad(self):
        rc = randcell(self.mapX, self.mapY) 
        rx, ry = rc[0], rc[1]
        if self.cells[ry][rx] != 4:    # Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ðµ Ð·Ð°Ð½ÑÑ‚Ð° Ð»Ð¸ ÐºÐ»ÐµÑ‚ÐºÐ° Ð¼Ð°ÑÑ‚ÐµÑ€ÑÐºÐ¾Ð¹
            self.cells[ry][rx] = 5
        else:
            self.helipad()

    # Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ ÐºÐ°Ñ€Ñ‚Ñƒ Ñ€ÐµÐºÐ°Ð¼Ð¸, Ð²Ð¾Ð´Ð¾Ñ‘Ð¼Ð°Ð¼Ð¸
    def generate_river(self, mapX, mapY, length = 5):   # Ð²Ð²Ð¾Ð´Ð¸Ð¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ ÐºÐ°Ñ€Ñ‚Ñ‹, Ð´Ð»Ð¸Ð½Ñƒ Ñ€ÐµÐºÐ¸ (ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²)
        map_size = mapX * mapY
        while map_size > 0:    # ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ñ€ÐµÐºÐ¸ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 50 ÐºÐ»ÐµÑ‚Ð¾Ðº ÐºÐ°Ñ€Ñ‚Ñ‹
            rc = randcell(self.mapX, self.mapY)   # Ð²Ð²Ð¾Ð´Ð¸Ð¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ ÐºÐ°Ñ€Ñ‚Ñ‹, Ð¼ÐµÑ‚Ð¾Ð´ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ñ€Ð°Ð½Ð´Ð¾Ð¼Ð½Ñ‹Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð² Ð¿Ñ€ÐµÐ´ÐµÐ»Ð°Ñ… ÐºÐ°Ñ€Ñ‚Ñ‹
            rx, ry = rc[0], rc[1]   # Ð¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼ Ñ€Ð°Ð½Ð´Ð¾Ð¼Ð½Ñ‹Ðµ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼
            self.cells[ry][rx] = 2  # Ð¼ÐµÐ½ÑÐµÐ¼ ÐºÐ»ÐµÑ‚ÐºÑƒ Ð¿Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¼ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ð¼ Ð½Ð° Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ 2(Ñ€ÐµÐºÐ°) Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚ CELL_TYPES
            length2 =  length
            while length2 - 1 > 0:   # Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÐµÐ¼ Ñ†Ð¸ÐºÐ» Ð¿Ð¾ÐºÐ° Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð½Ðµ Ð¾Ñ‚Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÐ¼ Ð´Ð»Ð¸Ð½Ð½Ñƒ Ñ€ÐµÐºÐ¸
                rc2 = randcell2(rx, ry)    # Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð½Ð°Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ ÑÐ¾ÑÐµÐ´Ð½ÐµÐ¹ ÐºÐ»ÐµÑ‚ÐºÐ¸ 
                rx2, ry2 = rc2[0], rc2[1]   # Ð¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ ÑÐ¾ÑÐµÐ´Ð½ÐµÐ¹ ÐºÐ»ÐµÑ‚ÐºÐ¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼
                if self.check_bounds(rx2, ry2):    # Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð»Ð¸ ÑÑ‚Ð° ÐºÐ»ÐµÑ‚ÐºÐ° Ð½Ð° ÐºÐ°Ñ€Ñ‚Ðµ
                    if self.cells[ry2][rx2] != 2:   # Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ðµ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð»Ð¸ ÐºÐ»ÐµÑ‚ÐºÐ° Ñ€ÐµÐºÐ¾Ð¹ 
                        self.cells[ry2][rx2] = 2    # Ð¼ÐµÐ½ÑÐµÐ¼ ÐºÐ»ÐµÑ‚ÐºÑƒ Ð¿Ð¾ Ð·Ð°Ð´Ð°Ð½Ð½Ñ‹Ð¼ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ð¼ Ð½Ð° Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ 2(Ñ€ÐµÐºÐ°) Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚ CELL_TYPES
                        rx, ry = rx2, ry2   # Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹ Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ñ†Ð¸ÑÐ»Ð°
                        length2 -= 1    # ÐµÑÐ»Ð¸ ÐºÐ»ÐµÑ‚ÐºÐ° Ñ€ÐµÐºÐ¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð° ÑƒÐ¼ÐµÐ½ÑŒÑˆÐ°ÐµÐ¼ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ†Ð¸ÐºÐ»Ð¾Ð²
            map_size -= 50    

    # ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ð¾Ð³Ð¾Ð½ÑŒ
    def add_fire(self):
        rc = randcell(self.mapX, self.mapY)
        rx, ry = rc[0], rc[1]
        if self.cells[ry][rx] == 1:    # ÐµÑÐ»Ð¸ Ð½Ð° ÐºÐ»ÐµÑ‚ÐºÐµ Ð´ÐµÑ€ÐµÐ²Ð¾
            self.cells[ry][rx] = 3     # Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÐµÐ³Ð¾ Ð½Ð° Ð¾Ð³Ð¾Ð½ÑŒ

    # ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ð¿Ð¾Ð¶Ð°Ñ€
    def update_fires(self, heli):
        for i in range(self.mapY):
            for j in range(self.mapX):
                if self.cells[i][j] == 3:   # ÐµÑÐ»Ð¸ Ð½Ð° ÐºÐ»ÐµÑ‚ÐºÐµ Ð¾Ð³Ð¾Ð½ÑŒ
                    self.cells[i][j] = 0    # Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼ ÐµÐ³Ð¾ Ð½Ð° Ð¿Ð¾Ð»Ðµ
                    heli.score -= THREE_PENALTY
                    heli.burn_tree += 1
        for k in range(10):    # ÑÐ¾Ð·Ð´Ð°Ñ‘Ð¼ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¾Ñ‡Ð°Ð³Ð¾Ð² Ð²Ð¾Ð·Ð³Ð¾Ñ€Ð°Ð½Ð¸Ñ
            self.add_fire()

    # Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð» Ð²ÐµÑ€Ñ‚Ð¾Ð»Ñ‘Ñ‚Ð°, Ð·Ð°Ð±Ð¾Ñ€ Ð²Ð¾Ð´Ñ‹, Ñ‚ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð¶Ð°Ñ€Ð¾Ð²
    def process_helicopter(self, heli, clouds):
        wc = self.cells[heli.hy][heli.hx]   # WorkCoordinate
        sc = clouds.cells[heli.hy][heli.hx]    # StormCoordinate
        if wc == 2:
            heli.tank = heli.maxtank
        if wc == 3 and heli.tank > 0:
            heli.tank -= 1
            self.cells[heli.hy][heli.hx] = 1
            heli.score += THREE_REWARD
            heli.save_tree += 1
        if wc == 4 and heli.score >= UPGRADE_COST:
            heli.maxtank += 1
            heli.score -= UPGRADE_COST
        if wc == 5 and heli.score >= HP_COST and heli.hp < heli.maxhp:
            heli.hp += 1
            heli.score -= HP_COST
        if sc == 2:
            heli.hp -= 1
            clouds.cells[heli.hy][heli.hx] = 1 
        if heli.hp == 0 or heli.score < 0:  
            heli.you_dead()    

    # Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¿Ð¾ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð°Ð¿Ð³Ñ€ÐµÐ¹Ð´Ð° Ð¸ Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð°
    def print_info(self):
        print("Ð’Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ðŸ”§:", UPGRADE_COST, " | ", "Ð ÐµÐ¼Ð¾Ð½Ñ‚ ðŸ¥:", HP_COST)

    # ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ ÐºÐ°Ñ€Ñ‚Ñƒ Ð² ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ
    def export_data(self):
        return {"cells":self.cells}
    
    # Ð¿ÐµÑ€ÐµÐ¿Ñ€Ð¸ÑÐ²Ð°Ð¸Ð²Ð°ÐµÐ¼ ÐºÐ°Ñ€Ñ‚Ñƒ Ñ‚Ð¾Ð¹ Ñ‡Ñ‚Ð¾ Ð¸Ð· ÑÐ»Ð¾Ð²Ð°Ñ€Ñ (ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ)
    def import_data(self, data):
        self.cells = data["cells"] or [[0 for i in range(self.mapX)] for j in range(self.mapY)]